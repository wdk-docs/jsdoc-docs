

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh-CN" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh-CN" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>关于JSDoc插件 &mdash; jsdoc-docs 2.0.19 文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="markdown插件" href="plugins-markdown.html" />
    <link rel="prev" title="块和内联标签" href="block-inline-tags.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> jsdoc-docs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">入门</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting-started.html">JSDoc 3入门</a></li>
<li class="toctree-l2"><a class="reference internal" href="namepaths.html">在JSDoc 3中使用namepath</a></li>
<li class="toctree-l2"><a class="reference internal" href="commandline.html">JSDoc的命令行参数</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring-jsdoc.html">使用配置文件配置JSDoc</a></li>
<li class="toctree-l2"><a class="reference internal" href="configuring-default-template.html">配置JSDoc的默认模板</a></li>
<li class="toctree-l2"><a class="reference internal" href="block-inline-tags.html">块和内联标签</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">关于JSDoc插件</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-and-enabling-a-plugin">创建和启用插件</a></li>
<li class="toctree-l3"><a class="reference internal" href="#authoring-jsdoc-3-plugins">关于JSDoc插件</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#event-handlers">事件处理程序</a></li>
<li class="toctree-l4"><a class="reference internal" href="#tag-definitions">标签定义</a></li>
<li class="toctree-l4"><a class="reference internal" href="#node-visitors">节点访客</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reporting-errors">报告错误</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugins-markdown.html">markdown插件</a></li>
<li class="toctree-l2"><a class="reference internal" href="tutorials.html">教程</a></li>
<li class="toctree-l2"><a class="reference internal" href="including-package.html">引入包文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="including-readme.html">引入README文件</a></li>
<li class="toctree-l2"><a class="reference internal" href="license-jsdoc3.html">License</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../tags/index.html">标签</a></li>
<li class="toctree-l1"><a class="reference internal" href="../howto/index.html">JSDoc示例</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../todo-list.html">待办清单</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">jsdoc-docs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">入门</a> &raquo;</li>
        
      <li>关于JSDoc插件</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/about/plugins.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="about-jsdoc-plugins">
<span id="plugins"></span><h1>关于JSDoc插件<a class="headerlink" href="#about-jsdoc-plugins" title="永久链接至标题">¶</a></h1>
<div class="section" id="creating-and-enabling-a-plugin">
<h2>创建和启用插件<a class="headerlink" href="#creating-and-enabling-a-plugin" title="永久链接至标题">¶</a></h2>
<p>创建和启用新的JSDoc插件需要两个步骤:</p>
<ol class="arabic simple">
<li><p>创建一个JavaScript模块以包含您的插件代码.</p></li>
<li><p>将该模块包含在 <code class="docutils literal notranslate"><span class="pre">plugins</span></code> 数组中 <span class="xref std std-ref">configured-jsdoc</span>. 您可以指定绝对路径或相对路径。如果使用相对路径，JSDoc将在当前工作目录中搜索插件;配置文件所在的目录;和JSDoc目录，按此顺序。</p></li>
</ol>
<p>例如, 如果您的插件是在当前工作目录的 <code class="docutils literal notranslate"><span class="pre">plugins/shout.js</span></code> 文件中定义的, 那么您应该将字符串 <code class="docutils literal notranslate"><span class="pre">plugins/shout</span></code> 添加到JSDoc配置中的 <code class="docutils literal notranslate"><span class="pre">plugins</span></code> 数组中文件:</p>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">将插件添加到 JSDoc 的配置文件中</span><a class="headerlink" href="#id2" title="永久链接至代码">¶</a></div>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;plugins&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;plugins/shout&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<p>JSDoc按照配置文件中列出的顺序执行插件.</p>
</div>
<div class="section" id="authoring-jsdoc-3-plugins">
<h2>关于JSDoc插件<a class="headerlink" href="#authoring-jsdoc-3-plugins" title="永久链接至标题">¶</a></h2>
<p>JSDoc 3 的插件系统提供了对解析过程的广泛控制. 插件可以通过执行以下任一操作来影响解析结果:</p>
<ul class="simple">
<li><p>定义事件处理程序</p></li>
<li><p>定义标签</p></li>
<li><p>为抽象语法树节点定义访问者</p></li>
</ul>
<div class="section" id="event-handlers">
<h3>事件处理程序<a class="headerlink" href="#event-handlers" title="永久链接至标题">¶</a></h3>
<p>在最高级别, 插件可以为JSDoc触发的特定命名事件注册处理程序.  JSDoc会将一个事件对象传递给处理程序. 你的插件模块应该导出一个包含你的处理程序的 <code class="docutils literal notranslate"><span class="pre">handlers</span></code> 对象, 如下所示:</p>
<div class="literal-block-wrapper docutils container" id="id3">
<div class="code-block-caption"><span class="caption-text">‘newDoclet’ 事件的事件处理程序插件</span><a class="headerlink" href="#id3" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">handlers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">newDoclet</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Do something when we see a new doclet</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<p>JSDoc以与底层代码相同的顺序触发事件.</p>
<p>事件处理程序插件可以通过在事件对象上设置 <code class="docutils literal notranslate"><span class="pre">stopPropagation</span></code> 属性(<code class="docutils literal notranslate"><span class="pre">e.stopPropagation</span> <span class="pre">=</span> <span class="pre">true</span></code>)来阻止以后的插件运行. 插件可以通过设置 <code class="docutils literal notranslate"><span class="pre">preventDefault</span></code> 属性(<code class="docutils literal notranslate"><span class="pre">e.preventDefault</span> <span class="pre">=</span> <span class="pre">true</span></code>)来停止触发事件.</p>
<div class="section" id="event-parsebegin">
<h4>Event: parseBegin<a class="headerlink" href="#event-parsebegin" title="永久链接至标题">¶</a></h4>
<p>在JSDoc开始加载和解析源文件之前, 会触发 <code class="docutils literal notranslate"><span class="pre">parseBegin</span></code> 事件. 您的插件可以通过修改事件的内容来控制JSDoc将解析哪些文件.</p>
<p><strong>Note</strong>: 此事件在JSDoc 3.2及更高版本中触发.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sourcefiles</span></code>: 要解析的源文件的路径数组.</p></li>
</ul>
</div>
<div class="section" id="event-filebegin">
<h4>Event: fileBegin<a class="headerlink" href="#event-filebegin" title="永久链接至标题">¶</a></h4>
<p>解析器即将解析文件时 <code class="docutils literal notranslate"><span class="pre">fileBegin</span></code> 事件. 如有必要, 您的插件可以使用此事件触发每个文件的初始化.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: 文件的名称.</p></li>
</ul>
</div>
<div class="section" id="event-beforeparse">
<h4>Event: beforeParse<a class="headerlink" href="#event-beforeparse" title="永久链接至标题">¶</a></h4>
<p>解析开始之前会触发 <code class="docutils literal notranslate"><span class="pre">beforeParse</span></code> 事件. 插件可以使用此方法修改将要解析的源代码. 例如, 您的插件可以添加JSDoc注释, 或者它可以删除非有效JavaScript的预处理标记.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: 文件的名称.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: 文件的内容.</p></li>
</ul>
<p>下面是一个示例, 它将函数的虚拟注释添加到源, 以便将其解析并添加到文档中. 这可以用于记录可供用户使用的方法, 但可能不会出现在所记录的源代码中, 例如外部超类提供的方法:</p>
<div class="literal-block-wrapper docutils container" id="id4">
<div class="code-block-caption"><span class="caption-text">示例</span><a class="headerlink" href="#id4" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">handlers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">beforeParse</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">extraDoc</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s1">&#39;/**&#39;</span><span class="p">,</span>
            <span class="s1">&#39; * Function provided by a superclass.&#39;</span><span class="p">,</span>
            <span class="s1">&#39; * @name superFunc&#39;</span><span class="p">,</span>
            <span class="s1">&#39; * @memberof ui.mywidget&#39;</span><span class="p">,</span>
            <span class="s1">&#39; * @function&#39;</span><span class="p">,</span>
            <span class="s1">&#39; */&#39;</span>
        <span class="p">];</span>
        <span class="nx">e</span><span class="p">.</span><span class="nx">source</span> <span class="o">+=</span> <span class="nx">extraDoc</span><span class="p">.</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39;\n&#39;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="event-jsdoccommentfound">
<h4>Event: jsdocCommentFound<a class="headerlink" href="#event-jsdoccommentfound" title="永久链接至标题">¶</a></h4>
<p>只要找到JSDoc注释, 就会触发 <code class="docutils literal notranslate"><span class="pre">jsdocCommentFound</span></code> 事件. 评论可能与任何代码相关, 也可能不相关. 您可以使用此事件在处理注释之前修改注释的内容.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: 文件的名称.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comment</span></code>: JSDoc评论的文本.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lineno</span></code>: 找到评论的行号.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columnno</span></code>: 找到评论的列号. 可在JSDoc 3.5.0及更高版本中使用.</p></li>
</ul>
</div>
<div class="section" id="event-symbolfound">
<h4>Event: symbolFound<a class="headerlink" href="#event-symbolfound" title="永久链接至标题">¶</a></h4>
<p>当解析器遇到可能需要记录的代码中的符号时, 会触发 <code class="docutils literal notranslate"><span class="pre">symbolFound</span></code> 事件. 例如, 解析器为源文件中的每个变量, 函数和对象文字触发 <code class="docutils literal notranslate"><span class="pre">symbolFound</span></code> 事件.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: 文件的名称.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comment</span></code>: 与符号关联的注释文本(如果有).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: 符号的唯一ID.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">lineno</span></code>: 找到符号的行号.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">columnno</span></code>: 找到符号的列号. 可在JSDoc 3.5.0及更高版本中使用.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range</span></code>: 一个数组, 包含源文件中与该符号关联的第一个和最后一个字符的数字索引.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">astnode</span></code>: 抽象语法树中的符号节点.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">code</span></code>: 包含代码详细信息的对象. 该对象通常包含 <code class="docutils literal notranslate"><span class="pre">name</span></code>, <code class="docutils literal notranslate"><span class="pre">type</span></code> 和 <code class="docutils literal notranslate"><span class="pre">node</span></code> 属性. 对象可能还有 <code class="docutils literal notranslate"><span class="pre">value</span></code>, <code class="docutils literal notranslate"><span class="pre">paramnames</span></code> 或 <code class="docutils literal notranslate"><span class="pre">funcscope</span></code> 属性, 具体取决于符号.</p></li>
</ul>
</div>
<div class="section" id="event-newdoclet">
<h4>Event: newDoclet<a class="headerlink" href="#event-newdoclet" title="永久链接至标题">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">newDoclet</span></code> 事件是最高级别的事件. 创建新doclet时会触发它. 这意味着已经处理了JSDoc注释或符号, 并且已经创建了将传递给模板的实际doclet.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doclet</span></code>: 创建的新doclet.</p></li>
</ul>
<p>doclet的属性可以根据doclet表示的注释或符号而有所不同. 您可能会看到的一些常见属性包括:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">comment</span></code>: JSDoc注释的文本, 如果符号未记录, 则为空字符串.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">meta</span></code>: 描述doclet如何与源文件相关的对象(例如, 源文件中的位置).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: 正在记录的符号的描述.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">kind</span></code>: 记录的符号类型(例如, <code class="docutils literal notranslate"><span class="pre">class</span></code> 或 <code class="docutils literal notranslate"><span class="pre">function</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: 符号的简称(例如, <code class="docutils literal notranslate"><span class="pre">myMethod</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">longname</span></code>: 完全限定名称, 包括成员信息(例如, <code class="docutils literal notranslate"><span class="pre">MyClass</span> <span class="pre">#myMethod</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">memberof</span></code>: 此符号所属的模块, 命名空间或类(例如, <code class="docutils literal notranslate"><span class="pre">MyClass</span></code>), 如果符号没有父符号, 则为空字符串.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scope</span></code>: 符号在其父级中的范围(例如, <code class="docutils literal notranslate"><span class="pre">global</span></code>, <code class="docutils literal notranslate"><span class="pre">static</span></code>, <code class="docutils literal notranslate"><span class="pre">instance</span></code> 或 <code class="docutils literal notranslate"><span class="pre">inner</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">undocumented</span></code>: 如果符号没有JSDoc注释, 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">defaultvalue</span></code>: 符号的默认值.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: 包含有关符号类型的详细信息的对象.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: 包含函数参数列表的对象.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tags</span></code>: 包含JSDoc无法识别的标签列表的对象. 只有在JSDoc的配置文件中将 <code class="docutils literal notranslate"><span class="pre">allowUnknownTags</span></code> 设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code> 时才可用.</p></li>
</ul>
<p>To see the doclets that JSDoc generates for your code, run JSDoc with the <code class="docutils literal notranslate"><span class="pre">-X</span></code> <a class="reference internal" href="commandline.html#command-line"><span class="std std-ref">JSDoc的命令行参数</span></a>.</p>
<p>下面是一个 <code class="docutils literal notranslate"><span class="pre">newDoclet</span></code> 处理程序的示例, 该处理程序会对描述进行大喊:</p>
<div class="literal-block-wrapper docutils container" id="id5">
<div class="code-block-caption"><span class="caption-text">示例</span><a class="headerlink" href="#id5" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">handlers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">newDoclet</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// e.doclet will refer to the newly created doclet</span>
        <span class="c1">// you can read and modify properties of that doclet if you wish</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">e</span><span class="p">.</span><span class="nx">doclet</span><span class="p">.</span><span class="nx">description</span> <span class="o">===</span> <span class="s1">&#39;string&#39;</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">e</span><span class="p">.</span><span class="nx">doclet</span><span class="p">.</span><span class="nx">description</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">doclet</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nx">toUpperCase</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="event-filecomplete">
<h4>Event: fileComplete<a class="headerlink" href="#event-filecomplete" title="永久链接至标题">¶</a></h4>
<p>解析器完成解析文件后会触发 <code class="docutils literal notranslate"><span class="pre">fileComplete</span></code> 事件. 您的插件可以使用此事件来触发每个文件的清理.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">filename</span></code>: 文件的名称.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span></code>: 文件的内容.</p></li>
</ul>
</div>
<div class="section" id="event-parsecomplete">
<h4>Event: parseComplete<a class="headerlink" href="#event-parsecomplete" title="永久链接至标题">¶</a></h4>
<p>在JSDoc解析了所有指定的源文件之后, 会触发 <code class="docutils literal notranslate"><span class="pre">parseComplete</span></code> 事件.</p>
<p><strong>Note</strong>: 此事件在JSDoc 3.2及更高版本中触发.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sourcefiles</span></code>: 解析源文件的路径数组.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">doclets</span></code>: 一组 doclet 对象. 有关每个doclet可以包含的属性的详细信息, 请参阅 <a class="reference external" href="＃event-newdoclet">newDoclet 事件</a>. 可在JSDoc 3.2.1及更高版本中使用.</p></li>
</ul>
</div>
<div class="section" id="event-processingcomplete">
<h4>Event: processingComplete<a class="headerlink" href="#event-processingcomplete" title="永久链接至标题">¶</a></h4>
<p>在JSDoc更新解析结果以反映继承和借用符号之后, 将触发 <code class="docutils literal notranslate"><span class="pre">processingComplete</span></code> 事件.</p>
<p><strong>Note</strong>: 此事件在JSDoc 3.2.1及更高版本中触发.</p>
<p>事件对象包含以下属性:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">doclets</span></code>: An array of doclet objects. See the <a class="reference external" href="#event-newdoclet">newDoclet event</a> for details about the properties that each doclet can contain.</p></li>
</ul>
</div>
</div>
<div class="section" id="tag-definitions">
<h3>标签定义<a class="headerlink" href="#tag-definitions" title="永久链接至标题">¶</a></h3>
<p>向标记字典添加标记是影响文档生成的中级方法. 在触发 <code class="docutils literal notranslate"><span class="pre">newDoclet</span></code> 事件之前, 解析JSDoc注释块以确定描述和可能存在的任何JSDoc标记. 找到标记后, 如果已在标记字典中定义了标记, 则有机会修改doclet.</p>
<p>插件可以通过导出 <code class="docutils literal notranslate"><span class="pre">defineTags</span></code> 函数来定义标签. 该函数将传递一个字典, 可用于定义标签, 如此:</p>
<div class="literal-block-wrapper docutils container" id="id6">
<div class="code-block-caption"><span class="caption-text">示例</span><a class="headerlink" href="#id6" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">defineTags</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dictionary</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// define tags here</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="the-dictionary">
<h4>词典<a class="headerlink" href="#the-dictionary" title="永久链接至标题">¶</a></h4>
<p>该词典提供以下方法:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">defineTag(title,</span> <span class="pre">opts)</span></code>: 用于定义标签. 第一个参数是标记的名称(例如, <code class="docutils literal notranslate"><span class="pre">param</span></code> 或 <code class="docutils literal notranslate"><span class="pre">overview</span></code>). 第二个是包含标记选项的对象. 您可以包含以下任何选项;每个选项的默认值是 <code class="docutils literal notranslate"><span class="pre">false</span></code>:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">canHaveType</span> <span class="pre">(boolean)</span></code>: 如果标记文本可以包含类型表达式(例如 <code class="docutils literal notranslate"><span class="pre">&#64;param</span> <span class="pre">{string}</span> <span class="pre">name</span> <span class="pre">-</span> <span class="pre">Description</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">{string}</span></code>, 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">canHaveName</span> <span class="pre">(boolean)</span></code>: 如果标签文本可以包含名称(例如 <code class="docutils literal notranslate"><span class="pre">&#64;param</span> <span class="pre">{string}</span> <span class="pre">name</span> <span class="pre">-</span> <span class="pre">Description</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">name</span></code>), 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isNamespace</span> <span class="pre">(boolean)</span></code>: Set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if the tag should be
applied to the doclet’s longname as a namespace. For example, the
<a class="reference internal" href="../tags/tags-module.html#directive-&#64;module" title="&#64;module directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">&#64;module</span></code></a> tag sets this option to <code class="docutils literal notranslate"><span class="pre">true</span></code>, and using the tag
<code class="docutils literal notranslate"><span class="pre">&#64;module</span> <span class="pre">myModuleName</span></code> results in the longname
<code class="docutils literal notranslate"><span class="pre">module:myModuleName</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mustHaveValue</span> <span class="pre">(boolean)</span></code>: 如果标记必须具有值(例如 <code class="docutils literal notranslate"><span class="pre">&#64;name</span> <span class="pre">TheName</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">TheName</span></code>), 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mustNotHaveDescription</span> <span class="pre">(boolean)</span></code>: 如果标签可能有值但是必须没有描述(例如 <code class="docutils literal notranslate"><span class="pre">&#64;tag</span> <span class="pre">{typeExpr}</span> <span class="pre">TheDescription</span></code> 中的 <code class="docutils literal notranslate"><span class="pre">TheDescription</span></code>), 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mustNotHaveValue</span> <span class="pre">(boolean)</span></code>: 如果标记必须没有值, 则设置为 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">onTagged</span> <span class="pre">(function)</span></code>: 找到标记时执行的回调函数. 该函数传递两个参数: doclet和标记对象.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">lookUp(tagName)</span></code>: 按名称检索标记对象. 返回标记对象, 包括其选项, 如果未定义标记, 则返回 <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">isNamespace(tagName)</span></code>: 如果标记作为命名空间应用于doclet的longname, 则返回 <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normalise(tagName)</span></code>: Returns the canonical name of a tag. For
example, the <a class="reference internal" href="../tags/tags-constant.html#directive-&#64;const" title="&#64;const directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">&#64;const</span></code></a> tag is a synonym for <a class="reference internal" href="../tags/tags-constant.html#directive-&#64;constant" title="&#64;constant directive"><code class="xref rst rst-dir docutils literal notranslate"><span class="pre">&#64;constant</span></code></a>; as a
result, if you call <code class="docutils literal notranslate"><span class="pre">normalise('const')</span></code>, it returns the string
<code class="docutils literal notranslate"><span class="pre">constant</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">normalize(tagName)</span></code>: <code class="docutils literal notranslate"><span class="pre">normalise</span></code> 的同义词. 可在JSDoc 3.3.0及更高版本中使用.</p></li>
</ul>
<p>标签的 <code class="docutils literal notranslate"><span class="pre">onTagged</span></code> 回调可以修改doclet或标签的内容.</p>
<div class="literal-block-wrapper docutils container" id="id7">
<div class="code-block-caption"><span class="caption-text">Defining an onTagged callback</span><a class="headerlink" href="#id7" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">dictionary</span><span class="p">.</span><span class="nx">defineTag</span><span class="p">(</span><span class="s1">&#39;instance&#39;</span><span class="p">,</span> <span class="p">{</span>
    <span class="nx">onTagged</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">doclet</span><span class="p">,</span> <span class="nx">tag</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">doclet</span><span class="p">.</span><span class="nx">scope</span> <span class="o">=</span> <span class="s2">&quot;instance&quot;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">defineTag</span></code> 方法返回一个 <code class="docutils literal notranslate"><span class="pre">Tag</span></code> 对象, 它有一个 <code class="docutils literal notranslate"><span class="pre">synonym</span></code> 方法, 可以用来声明标签的同义词.</p>
<div class="literal-block-wrapper docutils container" id="id8">
<div class="code-block-caption"><span class="caption-text">Defining a tag synonym</span><a class="headerlink" href="#id8" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">dictionary</span><span class="p">.</span><span class="nx">defineTag</span><span class="p">(</span><span class="s1">&#39;exception&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="cm">/* options for exception tag */</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">synonym</span><span class="p">(</span><span class="s1">&#39;throws&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="node-visitors">
<h3>节点访客<a class="headerlink" href="#node-visitors" title="永久链接至标题">¶</a></h3>
<p>在最低级别, 插件作者可以通过定义将访问每个节点的节点访问者来处理抽象语法树(AST)中的每个节点. 通过使用node-visitor插件, 您可以修改注释并触发任意代码段的解析器事件.</p>
<p>插件可以通过导出包含 <code class="docutils literal notranslate"><span class="pre">visitNode</span></code> 函数的 <code class="docutils literal notranslate"><span class="pre">astNodeVisitor</span></code> 对象来定义节点访问者, 就像这样:</p>
<div class="literal-block-wrapper docutils container" id="id9">
<div class="code-block-caption"><span class="caption-text">示例</span><a class="headerlink" href="#id9" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="nx">exports</span><span class="p">.</span><span class="nx">astNodeVisitor</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">visitNode</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">node</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">parser</span><span class="p">,</span> <span class="nx">currentSourceName</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// do all sorts of crazy things here</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<p>使用以下参数在每个节点上调用该函数:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">node</span></code>: The AST node. AST nodes are JavaScript objects that use the format defined by the <a class="reference external" href="https://github.com/estree/estree">ESTree spec</a>.
You can use <a class="reference external" href="https://astexplorer.net/">AST Explorer</a> to see the AST that will be created for your source code.
As of version 3.5.0, JSDoc uses the current version of the <a class="reference external" href="https://github.com/babel/babylon">Babylon</a> parser with all plugins enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">e</span></code>: 事件. 如果节点是解析器处理的节点, 则事件对象将已经填充了上面 <code class="docutils literal notranslate"><span class="pre">symbolFound</span></code> 事件中描述的相同内容. 否则, 它将是一个空对象, 可在其上设置各种属性.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">parser</span></code>: JSDoc解析器实例.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">currentSourceName</span></code>: 要解析的文件的名称.</p></li>
</ul>
<div class="section" id="making-things-happen">
<h4>让事情发生<a class="headerlink" href="#making-things-happen" title="永久链接至标题">¶</a></h4>
<p>实现节点访问者的主要原因是能够记录通常未记录的内容(如创建类的函数调用)或自动生成未记录的代码的文档. 例如, 插件可能会查找对 <code class="docutils literal notranslate"><span class="pre">_trigger</span></code> 方法的调用, 因为它知道这意味着事件被触发, 然后生成事件的文档.</p>
<p>为了使事情发生, <code class="docutils literal notranslate"><span class="pre">visitNode</span></code> 函数应该修改event参数的属性. 一般来说, 目标是构建注释然后获取要触发的事件. 解析器允许所有节点访问者查看节点后, 它会查看事件对象是否具有 <code class="docutils literal notranslate"><span class="pre">comment</span></code> 属性和 <code class="docutils literal notranslate"><span class="pre">event</span></code> 属性. 如果两者都有, 则触发事件属性中指定的事件. 事件通常是 <code class="docutils literal notranslate"><span class="pre">symbolFound</span></code> 或 <code class="docutils literal notranslate"><span class="pre">jsdocCommentFound</span></code> , 但理论上, 插件可以定义自己的事件并处理它们.</p>
<p>与事件处理程序插件一样, node-visitor插件可以通过在事件对象(<code class="docutils literal notranslate"><span class="pre">e.stopPropagation</span> <span class="pre">=</span> <span class="pre">true</span></code>)上设置 <code class="docutils literal notranslate"><span class="pre">stopPropagation</span></code> 属性来阻止以后的插件运行. 插件可以通过设置 <code class="docutils literal notranslate"><span class="pre">preventDefault</span></code> 属性(<code class="docutils literal notranslate"><span class="pre">e.preventDefault</span> <span class="pre">=</span> <span class="pre">true</span></code>)来停止触发事件.</p>
</div>
</div>
</div>
<div class="section" id="reporting-errors">
<h2>报告错误<a class="headerlink" href="#reporting-errors" title="永久链接至标题">¶</a></h2>
<p>如果您的插件需要报告错误, 请在 <code class="docutils literal notranslate"><span class="pre">jsdoc/util/logger</span></code> 模块中使用以下方法之一:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">logger.warn</span></code>: 警告用户可能出现的问题.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logger.error</span></code>: 报告插件可以恢复的错误.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logger.fatal</span></code>: 报告应该导致JSDoc停止运行的错误.</p></li>
</ul>
<p>使用这些方法可以创建比简单地抛出错误更好的用户体验.</p>
<p><strong>注意</strong>: 不要使用 <code class="docutils literal notranslate"><span class="pre">jsdoc/util/error</span></code> 模块来报告错误. 此模块已弃用, 将在JSDoc的未来版本中删除.</p>
<div class="literal-block-wrapper docutils container" id="id10">
<div class="code-block-caption"><span class="caption-text">Reporting a non-fatal error</span><a class="headerlink" href="#id10" title="永久链接至代码">¶</a></div>
<div class="highlight-js notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">logger</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsdoc/util/logger&#39;</span><span class="p">);</span>

<span class="nx">exports</span><span class="p">.</span><span class="nx">handlers</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">newDoclet</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Your code here.</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">somethingBadHappened</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">logger</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s1">&#39;Oh, no, something bad happened!&#39;</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="plugins-markdown.html" class="btn btn-neutral float-right" title="markdown插件" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="block-inline-tags.html" class="btn btn-neutral float-left" title="块和内联标签" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, BandCap

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>